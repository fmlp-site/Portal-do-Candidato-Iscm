<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fazer Inscrição</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      margin: 0;
      background-color: #f4f4f9;
    }

    /* Menu lateral */
    .sidebar {
      width: 200px;
      height: 100vh;
      background-color: #5a67d8;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 20px;
      position: fixed;
    }

    .sidebar h2 {
      font-size: 18px;
      margin-bottom: 20px;
    }

    .sidebar a {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      color: #fff;
      text-decoration: none;
      text-align: center;
      background-color: #4c51bf;
      border-radius: 5px;
    }

    .sidebar a:hover {
      background-color: #3b47a2;
    }

    /* Conteúdo principal */
    .main-content {
      margin-left: 200px;
      padding: 20px;
      width: calc(100% - 200px);
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      text-align: center;
    }

    .container h2 {
      color: #333;
    }

    .edital {
      margin-bottom: 20px;
      padding: 15px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .edital a {
      color: #5a67d8;
      text-decoration: none;
    }

    .inscrever-btn {
      margin-top: 10px;
      padding: 10px 20px;
      background-color: #5a67d8;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .inscrever-btn:hover {
      background-color: #4c51bf;
    }
  </style>
</head>
<body>

  <!-- Menu Lateral -->
  <div class="sidebar">
    <h2>Menu</h2>
    <a href="fazer-inscricao.html">Fazer Inscrição</a>
    <a href="consultar-inscricao.html">Consultar Inscrição</a>
    <a href="interpor-recurso.html">Interpor Recurso</a>
    <a href="consultar-resultado-recurso.html">Consultar Resultado dos Recursos</a>
    <a href="consultar-local-prova.html">Consultar Local de Prova</a>
    <a href="consultar-desempenho.html">Consultar Desempenho</a>
    <a href="fazer-matricula.html">Fazer Matrícula</a>
    <a href="consultar-matricula.html">Consultar Matrícula</a>
  </div>

  <!-- Conteúdo Principal -->
  <div class="main-content">
    <div class="container">
      <h2>Processos Seletivos Disponíveis</h2>
      <div id="editaisContainer">Carregando editais...</div>
    </div>
  </div>

  <script>
    // Verifica se o usuário está logado (CPF no localStorage)
    const cpfCandidato = localStorage.getItem('cpfCandidato');
    if (!cpfCandidato) {
      alert('Por favor, faça login para acessar esta página.');
      window.location.href = 'login.html';
    }

    // Função para carregar os editais do RestDB
    async function carregarEditais() {
      const url = 'https://vestibularb-c6f2.restdb.io/rest/processoseletivos?max=2'; // Altere para a URL correta do seu banco de dados RestDB
      const headers = {
        "content-type": "application/json",
        "x-apikey": "67250fe49ea5b66833ab989b", // Substitua pela sua API Key do RestDB
        "cache-control": "no-cache"
      };

      try {
        const response = await fetch(url, { headers });
        const processos = await response.json();

        const editaisContainer = document.getElementById('editaisContainer');
        editaisContainer.innerHTML = '';

        processos.forEach((processo) => {
          const editalDiv = document.createElement('div');
          editalDiv.classList.add('edital');
          
          editalDiv.innerHTML = `
            <h3>${processo.titulo}</h3>
            <p>${processo.descricao}</p>
            <a href="${processo.linkEdital}" target="_blank">Ver Edital</a>
            <button class="inscrever-btn" onclick="irParaFormulario('${processo._id}')">Inscreva-se</button>
          `;

          editaisContainer.appendChild(editalDiv);
        });
      } catch (error) {
        console.error('Erro ao carregar os editais:', error);
      }
    }

    // Função para redirecionar ao formulário de inscrição
    function irParaFormulario(processoId) {
      window.location.href = `formulario-inscricao.html?processo=${processoId}`;
    }

    // Chamada para carregar os editais ao carregar a página
    carregarEditais();
  </script>

</body>
</html>
